<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENVIRONMENT & WILDLIFE</title>


    <!-- CSS -->
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
<div class="container">
<a href="https://amaisel1.github.io/nypost-environment-and-wildlife/index.html">
  <h1>The Environment & Wildlife of the New York Post</h1>
</a>
<div class="topnav">
  <a href="https://amaisel1.github.io/nypost-environment-and-wildlife/search.html">Search</a>
  <a href= "https://amaisel1.github.io/nypost-environment-and-wildlife/aboutproject.html">About</a>
  <a href="https://amaisel1.github.io/nypost-environment-and-wildlife/generate.html">Generate</a>
</div>

<div class="image-container" onclick="slideRandomImage()">
    <img id="img1" class="active" src="">
    <img id="img2" src="">
</div>
    <script>
            const images = [];
        for (let i = 1; i <= 380; i++) {
            const num = String(i).padStart(3, '0');
            images.push(`NYPOST IMAGES/nypost.image.${num}.jpg`);
        }
        
        let current = 0;
        const img1 = document.getElementById("img1");
        const img2 = document.getElementById("img2");
        let showingImg1 = true;
        
        function getRandomIndex() {
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * images.length);
            } while (newIndex === current);
            current = newIndex;
            return newIndex;
        }
        function slideRandomImage() {
            console.log("Click detected!");
            const nextImage = images[getRandomIndex()];
            
            if (showingImg1) {
                img2.src = nextImage;
                img2.classList.add("active");
                img1.classList.remove("active");
                img1.classList.add("prev");
                setTimeout(() => img1.classList.remove("prev"), 700);
            } else {
                img1.src = nextImage;
                img1.classList.add("active");
                img2.classList.remove("active");
                img2.classList.add("prev");
                setTimeout(() => img2.classList.remove("prev"), 700);
            }
            showingImg1 = !showingImg1;
        }
        img1.src = images[getRandomIndex()];
        setInterval(slideRandomImage, 6000);

    </script>


</div>
<div class="ticker-container">
    <ul id="ticker">
        <li>default headlines</li>
        <li>error found!</li>
        <li>no headlines?</li>
    </ul>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
<script>
    async function loadHeadlines() {
        try {
            const response = await fetch('Environment_Wildlife_Stories_Cleaned.csv');
            const content = await response.text();
            
            let headlines = [];

            Papa.parse(content, {
                complete: function(results) {
                    results.data.forEach(row => {
                        if (row[0] && row[0].trim()) {
                            headlines.push(row[0].trim());
                        }
                    });
                    
                    if (headlines.length > 0) {
                        populateTicker(headlines);
                    }
                },
                skipEmptyLines: true
            });
        } catch (error) {
            console.error('Error loading headlines:', error);
        }
    }

    function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    }

    function populateTicker(headlines) {
        const shuffled = shuffleArray(headlines);
        const ticker = document.getElementById('ticker');
        ticker.innerHTML = '';

        // Use only first 50-100 headlines for performance
        const subset = shuffled.slice(0, 50);
        
        // Duplicate for seamless loop
        const doubled = [...subset, ...subset];
        
        doubled.forEach(headline => {
            const li = document.createElement('li');
            li.textContent = headline;
            ticker.appendChild(li);
        });
    }

    window.addEventListener('DOMContentLoaded', loadHeadlines);
</script>
<br><br><br><br>
<footer> A project by <a href="https://amaisel1.github.io">Alana Maisel</a> 2026</footer>
</body>
</html>
